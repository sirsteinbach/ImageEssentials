!function(r,n,o,t){"use strict";Foundation.libs.topbar={name:"topbar",version:"5.5.0",settings:{index:0,sticky_class:"sticky",custom_back_text:!0,back_text:"Back",mobile_show_parent_link:!0,is_hover:!0,scrolltop:!0,sticky_on:"all"},init:function(t,a,e){Foundation.inherit(this,"add_custom_rule register_media throttle");var s=this;s.register_media("topbar","foundation-mq-topbar"),this.bindings(a,e),s.S("["+this.attr_name()+"]",this.scope).each(function(){var t=r(this),a=t.data(s.attr_name(!0)+"-init");s.S("section, .top-bar-section",this);t.data("index",0);var e=t.parent();e.hasClass("fixed")||s.is_sticky(t,e,a)?(s.settings.sticky_class=a.sticky_class,(s.settings.sticky_topbar=t).data("height",e.outerHeight()),t.data("stickyoffset",e.offset().top)):t.data("height",t.outerHeight()),a.assembled||s.assemble(t),a.is_hover?s.S(".has-dropdown",t).addClass("not-click"):s.S(".has-dropdown",t).removeClass("not-click"),s.add_custom_rule(".f-topbar-fixed { padding-top: "+t.data("height")+"px }"),e.hasClass("fixed")&&s.S("body").addClass("f-topbar-fixed")})},is_sticky:function(t,a,e){var s=a.hasClass(e.sticky_class);return!(!s||"all"!==e.sticky_on)||(s&&this.small()&&"small"===e.sticky_on?matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches&&!matchMedia(Foundation.media_queries.large).matches:s&&this.medium()&&"medium"===e.sticky_on?matchMedia(Foundation.media_queries.small).matches&&matchMedia(Foundation.media_queries.medium).matches&&!matchMedia(Foundation.media_queries.large).matches:!(!s||!this.large()||"large"!==e.sticky_on)&&(matchMedia(Foundation.media_queries.small).matches&&matchMedia(Foundation.media_queries.medium).matches&&matchMedia(Foundation.media_queries.large).matches))},toggle:function(t){var a,e=this,s=(a=t?e.S(t).closest("["+this.attr_name()+"]"):e.S("["+this.attr_name()+"]")).data(this.attr_name(!0)+"-init"),i=e.S("section, .top-bar-section",a);e.breakpoint()&&(e.rtl?(i.css({right:"0%"}),r(">.name",i).css({right:"100%"})):(i.css({left:"0%"}),r(">.name",i).css({left:"100%"})),e.S("li.moved",i).removeClass("moved"),a.data("index",0),a.toggleClass("expanded").css("height","")),s.scrolltop?a.hasClass("expanded")?a.parent().hasClass("fixed")&&(s.scrolltop?(a.parent().removeClass("fixed"),a.addClass("fixed"),e.S("body").removeClass("f-topbar-fixed"),n.scrollTo(0,0)):a.parent().removeClass("expanded")):a.hasClass("fixed")&&(a.parent().addClass("fixed"),a.removeClass("fixed"),e.S("body").addClass("f-topbar-fixed")):(e.is_sticky(a,a.parent(),s)&&a.parent().addClass("fixed"),a.parent().hasClass("fixed")&&(a.hasClass("expanded")?(a.addClass("fixed"),a.parent().addClass("expanded"),e.S("body").addClass("f-topbar-fixed")):(a.removeClass("fixed"),a.parent().removeClass("expanded"),e.update_sticky_positioning())))},timer:null,events:function(t){var o=this,d=this.S;d(this.scope).off(".topbar").on("click.fndtn.topbar","["+this.attr_name()+"] .toggle-topbar",function(t){t.preventDefault(),o.toggle(this)}).on("click.fndtn.topbar",'.top-bar .top-bar-section li a[href^="#"],['+this.attr_name()+'] .top-bar-section li a[href^="#"]',function(t){var a=r(this).closest("li");!o.breakpoint()||a.hasClass("back")||a.hasClass("has-dropdown")||o.toggle()}).on("click.fndtn.topbar","["+this.attr_name()+"] li.has-dropdown",function(t){var a=d(this),e=d(t.target),s=a.closest("["+o.attr_name()+"]").data(o.attr_name(!0)+"-init");e.data("revealId")?o.toggle():o.breakpoint()||s.is_hover&&!Modernizr.touch||(t.stopImmediatePropagation(),a.hasClass("hover")?(a.removeClass("hover").find("li").removeClass("hover"),a.parents("li.hover").removeClass("hover")):(a.addClass("hover"),r(a).siblings().removeClass("hover"),"A"===e[0].nodeName&&e.parent().hasClass("has-dropdown")&&t.preventDefault()))}).on("click.fndtn.topbar","["+this.attr_name()+"] .has-dropdown>a",function(t){if(o.breakpoint()){t.preventDefault();var a=d(this),e=a.closest("["+o.attr_name()+"]"),s=e.find("section, .top-bar-section"),i=(a.next(".dropdown").outerHeight(),a.closest("li"));e.data("index",e.data("index")+1),i.addClass("moved"),o.rtl?(s.css({right:-100*e.data("index")+"%"}),s.find(">.name").css({right:100*e.data("index")+"%"})):(s.css({left:-100*e.data("index")+"%"}),s.find(">.name").css({left:100*e.data("index")+"%"})),e.css("height",a.siblings("ul").outerHeight(!0)+e.data("height"))}}),d(n).off(".topbar").on("resize.fndtn.topbar",o.throttle(function(){o.resize.call(o)},50)).trigger("resize").trigger("resize.fndtn.topbar").load(function(){d(this).trigger("resize.fndtn.topbar")}),d("body").off(".topbar").on("click.fndtn.topbar",function(t){0<d(t.target).closest("li").closest("li.hover").length||d("["+o.attr_name()+"] li.hover").removeClass("hover")}),d(this.scope).on("click.fndtn.topbar","["+this.attr_name()+"] .has-dropdown .back",function(t){t.preventDefault();var a=d(this),e=a.closest("["+o.attr_name()+"]"),s=e.find("section, .top-bar-section"),i=(e.data(o.attr_name(!0)+"-init"),a.closest("li.moved")),n=i.parent();e.data("index",e.data("index")-1),o.rtl?(s.css({right:-100*e.data("index")+"%"}),s.find(">.name").css({right:100*e.data("index")+"%"})):(s.css({left:-100*e.data("index")+"%"}),s.find(">.name").css({left:100*e.data("index")+"%"})),0===e.data("index")?e.css("height",""):e.css("height",n.outerHeight(!0)+e.data("height")),setTimeout(function(){i.removeClass("moved")},300)}),d(this.scope).find(".dropdown a").focus(function(){r(this).parents(".has-dropdown").addClass("hover")}).blur(function(){r(this).parents(".has-dropdown").removeClass("hover")})},resize:function(){var n=this;n.S("["+this.attr_name()+"]").each(function(){var t,a=n.S(this),e=a.data(n.attr_name(!0)+"-init"),s=a.parent("."+n.settings.sticky_class);if(!n.breakpoint()){var i=a.hasClass("expanded");a.css("height","").removeClass("expanded").find("li").removeClass("hover"),i&&n.toggle(a)}n.is_sticky(a,s,e)&&(s.hasClass("fixed")?(s.removeClass("fixed"),t=s.offset().top,n.S(o.body).hasClass("f-topbar-fixed")&&(t-=a.data("height")),a.data("stickyoffset",t),s.addClass("fixed")):(t=s.offset().top,a.data("stickyoffset",t)))})},breakpoint:function(){return!matchMedia(Foundation.media_queries.topbar).matches},small:function(){return matchMedia(Foundation.media_queries.small).matches},medium:function(){return matchMedia(Foundation.media_queries.medium).matches},large:function(){return matchMedia(Foundation.media_queries.large).matches},assemble:function(t){var i=this,n=t.data(this.attr_name(!0)+"-init"),a=i.S("section, .top-bar-section",t);a.detach(),i.S(".has-dropdown>a",a).each(function(){var t,a=i.S(this),e=a.siblings(".dropdown"),s=a.attr("href");e.find(".title.back").length||(t=1==n.mobile_show_parent_link&&s?r('<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5></li><li class="parent-link show-for-small-only"><a class="parent-link js-generated" href="'+s+'">'+a.html()+"</a></li>"):r('<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5>'),1==n.custom_back_text?r("h5>a",t).html(n.back_text):r("h5>a",t).html("&laquo; "+a.html()),e.prepend(t))}),a.appendTo(t),this.sticky(),this.assembled(t)},assembled:function(t){t.data(this.attr_name(!0),r.extend({},t.data(this.attr_name(!0)),{assembled:!0}))},height:function(t){var a=0,e=this;return r("> li",t).each(function(){a+=e.S(this).outerHeight(!0)}),a},sticky:function(){var t=this;this.S(n).on("scroll",function(){t.update_sticky_positioning()})},update_sticky_positioning:function(){var t="."+this.settings.sticky_class,a=this.S(n),e=this;if(e.settings.sticky_topbar&&e.is_sticky(this.settings.sticky_topbar,this.settings.sticky_topbar.parent(),this.settings)){var s=this.settings.sticky_topbar.data("stickyoffset");e.S(t).hasClass("expanded")||(a.scrollTop()>s?e.S(t).hasClass("fixed")||(e.S(t).addClass("fixed"),e.S("body").addClass("f-topbar-fixed")):a.scrollTop()<=s&&e.S(t).hasClass("fixed")&&(e.S(t).removeClass("fixed"),e.S("body").removeClass("f-topbar-fixed")))}},off:function(){this.S(this.scope).off(".fndtn.topbar"),this.S(n).off(".fndtn.topbar")},reflow:function(){}}}(jQuery,window,window.document);